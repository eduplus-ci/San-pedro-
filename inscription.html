<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Formulaire de Candidature</title>
    <link rel="stylesheet" href="styles1.css">
    <link rel="icon" href="images/logo/LOGO.png"/>
    <!-- Intégration de EmailJS SDK -->
    <script src="https://cdn.jsdelivr.net/npm/@emailjs/browser@3/dist/email.min.js"></script>
    <script>
        (function(){
            // Remplacez VOTRE_USER_ID par votre vrai ID EmailJS
            emailjs.init("LW4veR9wPiL_CT1wh");
        })();
    </script>
</head>
<body>

<h1 id="dynamic-text">
    <img src="images/logo/LOGO.png" style="border-radius: 45%; margin-top: 0px; margin-bottom: 0%;" class="sizelogo">
    <br>
</h1>

<script>
    const text = "Rejoignez notre équipe d'enseignants!!!";
    let index = 0;
    function typeWriter() {
        if (index < text.length) {
            document.getElementById("dynamic-text").innerHTML += text.charAt(index);
            index++;
            setTimeout(typeWriter, 50);
        }
    }
    typeWriter();
</script>

<form id="candidatureForm">
    <label for="nom">Nom et Prénom</label>
    <input type="text" id="nom" name="nom" required placeholder="Tah Bi Youan Arnaud"><br>

    <label for="telephone">Téléphone(Whatsapp)</label>
    <input type="tel" id="telephone" name="telephone" required placeholder="+225xxxxxxxxxx"><br>

    <label for="quartier">Lieux de Résidence</label>
    <input type="text" id="quartier" name="quartier" required placeholder="San-pédro (quartier Lac)"><br>

    <label for="matiere1">Matière enseignée 1</label>
    <input type="text" id="matiere1" name="matiere1" required placeholder="Ex: Mathématique"><br>

    <label for="matiere2">Matière enseignée 2 </label>
    <input type="text" id="matiere2" name="matiere2" required placeholder="Ex: physique-chimie"><br>

    <label for="matiere3">Matière enseignée 3 (Optionnelle)</label>
    <input type="text" id="matiere3" name="matiere3" placeholder="Ex: SVT"><br>

    <label for="cv">Charger votre CV (PDF uniquement)</label>
    <input type="file" id="cv" name="cv" accept=".pdf" ><br>

    <a href="index.html" class="retour">Retour</a>
    <button type="submit" class="envoie">Envoyer</button>
</form>

<script>
document.getElementById('candidatureForm').addEventListener('submit', function(e) {
    e.preventDefault();

    const form = this;
    const formData = new FormData(form);

    // Lecture du fichier CV en base64
    const file = formData.get('cv');
    const reader = new FileReader();

    reader.onload = function(event) {
        const cvBase64 = event.target.result.split(',')[1]; // Supprime "data:...;base64,"

        const params = {
            nom: formData.get('nom'),
            telephone: formData.get('telephone'),
            quartier: formData.get('quartier'),
            matiere1: formData.get('matiere1'),
            matiere2: formData.get('matiere2'),
            matiere3: formData.get('matiere3'),
            cv_file: cvBase64,
            cv_filename: file.name
        };

        emailjs.send("service_EduPlus", "template_g6eukou", params)
            .then(function(response) {
                alert("Votre candidature a été envoyée avec succès !");
                form.reset();
            }, function(error) {
                alert("Une erreur s'est produite : " + error.text);
            });
    };

    reader.readAsDataURL(file);
});
</script>

</body>
</html>
